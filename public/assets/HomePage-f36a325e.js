import{r,u as y,j as a,c as S,F as v,I as T,z as $,D as x,S as D,N as b,x as E,y as f,L as G}from"./index-602cb982.js";import{u as A}from"./useLazyImage-2963bc7e.js";import{a as L,b as k,C as R}from"./CardText-4760fa8a.js";import{g as B}from"./token-f48d968b.js";import{u as F}from"./useDispatch-c8a5dc75.js";const C=r.forwardRef(({className:e,bsPrefix:t,as:s="span",...c},n)=>(t=y(t,"input-group-text"),a.jsx(s,{ref:n,className:S(e,t),...c})));C.displayName="InputGroupText";const p=C,H=e=>a.jsx(p,{children:a.jsx(v,{type:"checkbox",...e})}),M=e=>a.jsx(p,{children:a.jsx(v,{type:"radio",...e})}),I=r.forwardRef(({bsPrefix:e,size:t,hasValidation:s,className:c,as:n="div",...u},d)=>{e=y(e,"input-group");const l=r.useMemo(()=>({}),[]);return a.jsx(T.Provider,{value:l,children:a.jsx(n,{ref:d,...u,className:S(c,e,t&&`${e}-${t}`,s&&"has-validation")})})});I.displayName="InputGroup";const z=Object.assign(I,{Text:p,Radio:M,Checkbox:H}),_={"search-bar-wrapper":"_search-bar-wrapper_fc2ct_1","search-section":"_search-section_fc2ct_6","search-input":"_search-input_fc2ct_6","spinner-wrapper":"_spinner-wrapper_fc2ct_14"},V=["All",...$],O=["Date","Title","Category"];function U(e){const[t,s]=r.useState(!1),c=r.useRef(void 0),n=l=>{var o;(o=e.onSelectCategory)==null||o.call(e,l)},u=l=>{var o;(o=e.onSelectSort)==null||o.call(e,l)},d=l=>{clearTimeout(c.current),s(!0),c.current=setTimeout(()=>{var o;(o=e.onChange)==null||o.call(e,l.target.value),s(!1)},350)};return a.jsxs("div",{className:_["search-bar-wrapper"],children:[a.jsxs(z,{className:_["search-section"],children:[a.jsx("input",{onChange:d,type:"text",className:`form-control ${_["search-input"]}`,placeholder:"Search..."}),a.jsx(x,{title:"Sort by",onSelect:u,categories:O,defaultValue:"Date"}),a.jsx(x,{title:"Filter",onSelect:n,categories:V,defaultValue:"All"})]}),t&&a.jsx("div",{className:_["spinner-wrapper"],children:a.jsx(D,{animation:"border",variant:"primary"})})]})}const q="_cards_1xtvc_1",J="_visible_1xtvc_21",m={"cards-wrapper":"_cards-wrapper_1xtvc_1",cards:q,"no-images":"_no-images_1xtvc_11","loading-images":"_loading-images_1xtvc_15",visible:J},K="_card_1l3aj_1",Q="_header_1l3aj_15",W="_image_1l3aj_25",X="_loaded_1l3aj_41",Y="_footer_1l3aj_69",Z="_category_1l3aj_73",g={card:K,header:Q,"image-wrapper":"_image-wrapper_1l3aj_25",image:W,loaded:X,"loading-img":"_loading-img_1l3aj_44","loading-image":"_loading-image_1l3aj_1",footer:Y,category:Z};function P(e){const{title:t,id:s}=e,[c,n]=A(s,t,{size:"medium"});return r.useEffect(()=>{n()},[e.stateToListenTo]),a.jsxs(b,{to:`/views?id=${s}`,className:`card text-center ${g.card}`,children:[a.jsx(L,{className:g.header,children:a.jsx("h2",{children:e.title})}),c,a.jsx(k,{className:g.footer,children:a.jsxs(R,{className:g.category,children:["Category: ",e.category]})})]})}const ee=()=>async function(e){const s=await(await fetch(`${E}/get`,{method:"GET",headers:{Authorization:B()}})).json();e({type:"ADD_IMAGE_ITEMS",payload:s}),e({type:"SET_LOADED_ITEMS",payload:!0})};function j(e){return e.toLowerCase()}const ce=()=>{const e=f(i=>i.imageItems),t=f(i=>i.loadedAllItems),s=F(),c=r.useRef(t),[n,u]=r.useState(""),[d,l]=r.useState("All"),[o,w]=r.useState("Date");r.useEffect(()=>{t||c.current||(c.current=!0,s(ee()))},[]);const N=r.useMemo(()=>e.filter(i=>n&&!i.title.toLowerCase().includes(n.toLowerCase())?!1:d==="All"?!0:i.category===d).sort((i,h)=>i[j(o)].localeCompare(h[j(o)])),[n,d,e,o]);return a.jsxs(a.Fragment,{children:[a.jsx(U,{onChange:u,onSelectCategory:l,onSelectSort:w}),a.jsxs("div",{className:m["cards-wrapper"],children:[a.jsx("div",{className:`${m.cards} ${m.grid}`,children:N.map((i,h)=>r.createElement(P,{...i,stateToListenTo:e,key:`card_${h}`}))}),a.jsx(G,{fullScreen:!1,className:`${m["loading-images"]} ${t?"":m.visible}`})]})]})};export{ce as default};
