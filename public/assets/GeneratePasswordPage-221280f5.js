import{r,u as x,j as o,c as E,C as te,E as se,g as F,G as ne,o as ae,H as oe,l as re,i as k,k as B,J as ie,K as le,R as ce,m as L,M as de,y as ue,S as fe,w as pe,x as me}from"./index-a2d7adc7.js";import{g as ve}from"./token-f48d968b.js";import{F as he}from"./index-4420de2c.js";import{d as ye}from"./divWithClassName-86292eb9.js";import{C as we,F as S,i as ge,u as H,r as _e,h as A,a as D}from"./hasClass-96dcdab4.js";import{u as xe}from"./useDispatch-5edecf31.js";const U=ye("h4");U.displayName="DivStyledAsH4";const M=r.forwardRef(({className:e,bsPrefix:t,as:s=U,...n},a)=>(t=x(t,"alert-heading"),o.jsx(s,{ref:a,className:E(e,t),...n})));M.displayName="AlertHeading";const Re=M,I=r.forwardRef(({className:e,bsPrefix:t,as:s=te,...n},a)=>(t=x(t,"alert-link"),o.jsx(s,{ref:a,className:E(e,t),...n})));I.displayName="AlertLink";const Ee=I,G=r.forwardRef((e,t)=>{const{bsPrefix:s,show:n=!0,closeLabel:a="Close alert",closeVariant:u,className:i,children:f,variant:d="primary",onClose:l,dismissible:v,transition:w=S,...h}=se(e,{show:"onClose"}),y=x(s,"alert"),c=F(R=>{l&&l(!1,R)}),g=w===!0?S:w,p=o.jsxs("div",{role:"alert",...g?void 0:h,ref:t,className:E(i,y,d&&`${y}-${d}`,v&&`${y}-dismissible`),children:[v&&o.jsx(we,{onClick:c,"aria-label":a,variant:u}),f]});return g?o.jsx(g,{unmountOnExit:!0,...h,ref:void 0,in:n,children:p}):n?p:null});G.displayName="Alert";const P=Object.assign(G,{Link:Ee,Heading:Re}),Ne=()=>{};function je(e,t,{disabled:s,clickTrigger:n}={}){const a=t||Ne;ne(e,a,{disabled:s,clickTrigger:n});const u=F(i=>{ge(i)&&a(i)});r.useEffect(()=>{if(s||e==null)return;const i=ae(oe(e));let f=(i.defaultView||window).event;const d=re(i,"keyup",l=>{if(l===f){f=void 0;return}u(l)});return()=>{d()}},[e,s,u])}const K=r.forwardRef((e,t)=>{const{flip:s,offset:n,placement:a,containerPadding:u,popperConfig:i={},transition:f,runTransition:d}=e,[l,v]=k(),[w,h]=k(),y=B(v,t),c=H(e.container),g=H(e.target),[p,R]=r.useState(!e.show),m=ie(g,l,le({placement:a,enableEvents:!!e.show,containerPadding:u||5,flip:s,offset:n,arrowElement:w,popperConfig:i}));e.show&&p&&R(!1);const N=(...ee)=>{R(!0),e.onExited&&e.onExited(...ee)},b=e.show||!p;if(je(l,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!b)return null;const{onExit:O,onExiting:j,onEnter:T,onEntering:C,onEntered:Z}=e;let $=e.children(Object.assign({},m.attributes.popper,{style:m.styles.popper,ref:y}),{popper:m,placement:a,show:!!e.show,arrowProps:Object.assign({},m.attributes.arrow,{style:m.styles.arrow,ref:h})});return $=_e(f,d,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:$,onExit:O,onExiting:j,onExited:N,onEnter:T,onEntering:C,onEntered:Z}),c?ce.createPortal($,c):null});K.displayName="Overlay";const be=K,W=r.forwardRef(({className:e,bsPrefix:t,as:s="div",...n},a)=>(t=x(t,"popover-header"),o.jsx(s,{ref:a,className:E(e,t),...n})));W.displayName="PopoverHeader";const Oe=W,z=r.forwardRef(({className:e,bsPrefix:t,as:s="div",...n},a)=>(t=x(t,"popover-body"),o.jsx(s,{ref:a,className:E(e,t),...n})));z.displayName="PopoverBody";const V=z;function J(e,t){let s=e;return e==="left"?s=t?"end":"start":e==="right"&&(s=t?"start":"end"),s}function q(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Te=r.forwardRef(({bsPrefix:e,placement:t="right",className:s,style:n,children:a,body:u,arrowProps:i,hasDoneInitialMeasure:f,popper:d,show:l,...v},w)=>{const h=x(e,"popover"),y=L(),[c]=(t==null?void 0:t.split("-"))||[],g=J(c,y);let p=n;return l&&!f&&(p={...n,...q(d==null?void 0:d.strategy)}),o.jsxs("div",{ref:w,role:"tooltip",style:p,"x-placement":c,className:E(s,h,c&&`bs-popover-${g}`),...v,children:[o.jsx("div",{className:"popover-arrow",...i}),u?o.jsx(V,{children:a}):a]})}),Ce=Object.assign(Te,{Header:Oe,Body:V,POPPER_OFFSET:[0,8]}),Q=r.forwardRef(({bsPrefix:e,placement:t="right",className:s,style:n,children:a,arrowProps:u,hasDoneInitialMeasure:i,popper:f,show:d,...l},v)=>{e=x(e,"tooltip");const w=L(),[h]=(t==null?void 0:t.split("-"))||[],y=J(h,w);let c=n;return d&&!i&&(c={...n,...q(f==null?void 0:f.strategy)}),o.jsxs("div",{ref:v,style:c,role:"tooltip","x-placement":h,className:E(s,e,`bs-tooltip-${y}`),...l,children:[o.jsx("div",{className:"tooltip-arrow",...u}),o.jsx("div",{className:`${e}-inner`,children:a})]})});Q.displayName="Tooltip";const X=Object.assign(Q,{TOOLTIP_OFFSET:[0,6]});function Se(e){const t=r.useRef(null),s=x(void 0,"popover"),n=x(void 0,"tooltip"),a=r.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(A(t.current,s))return Ce.POPPER_OFFSET;if(A(t.current,n))return X.TOOLTIP_OFFSET}return[0,0]}}}),[e,s,n]);return[t,[a]]}function $e(e,t){const{ref:s}=e,{ref:n}=t;e.ref=s.__wrapped||(s.__wrapped=a=>s(D(a))),t.ref=n.__wrapped||(n.__wrapped=a=>n(D(a)))}const Y=r.forwardRef(({children:e,transition:t=S,popperConfig:s={},rootClose:n=!1,placement:a="top",show:u=!1,...i},f)=>{const d=r.useRef({}),[l,v]=r.useState(null),[w,h]=Se(i.offset),y=B(f,w),c=t===!0?S:t||void 0,g=F(p=>{v(p),s==null||s.onFirstUpdate==null||s.onFirstUpdate(p)});return de(()=>{l&&i.target&&(d.current.scheduleUpdate==null||d.current.scheduleUpdate())},[l,i.target]),r.useEffect(()=>{u||v(null)},[u]),o.jsx(be,{...i,ref:y,popperConfig:{...s,modifiers:h.concat(s.modifiers||[]),onFirstUpdate:g},transition:c,rootClose:n,placement:a,show:u,children:(p,{arrowProps:R,popper:m,show:N})=>{var b,O;$e(p,R);const j=m==null?void 0:m.placement,T=Object.assign(d.current,{state:m==null?void 0:m.state,scheduleUpdate:m==null?void 0:m.update,placement:j,outOfBoundaries:(m==null||(b=m.state)==null||(O=b.modifiersData.hide)==null?void 0:O.isReferenceHidden)||!1,strategy:s.strategy}),C=!!l;return typeof e=="function"?e({...p,placement:j,show:N,...!t&&N&&{className:"show"},popper:T,arrowProps:R,hasDoneInitialMeasure:C}):r.cloneElement(e,{...p,placement:j,arrowProps:R,popper:T,hasDoneInitialMeasure:C,className:E(e.props.className,!t&&N&&"show"),style:{...e.props.style,...p.style}})}})});Y.displayName="Overlay";const Fe=Y,ke="_container_cvrub_1",He="_title_cvrub_6",Ae="_button_cvrub_10",De="_spinner_cvrub_15",Pe="_visible_cvrub_18",Be="_success_cvrub_22",Le="_copy_cvrub_34",Ue="_tooltip_cvrub_68",_={container:ke,title:He,button:Ae,spinner:De,visible:Pe,success:Be,"message-items":"_message-items_cvrub_28","copy-wrapper":"_copy-wrapper_cvrub_34",copy:Le,"password-text":"_password-text_cvrub_56",tooltip:Ue},Ve=()=>{const e=xe(),t=ue(c=>c.tempPassword),[s,n]=r.useState(!1),[a,u]=r.useState(null),[i,f]=r.useState(!1),d=r.useRef(null),l=r.useRef(null),v=async()=>{const c=await fetch(`${me}/generate-password`,{method:"GET",headers:{Authorization:ve()}});if(c.status!==200){u("Something went wrong");return}const g=await c.json();e({type:"SET_TEMP_PASSWORD",payload:g.password})},w=async()=>{u(null),n(!0),await v(),n(!1)},h=()=>{t&&(navigator.clipboard.writeText(t),f(!0),setTimeout(()=>{f(!1)},2e3))},y=()=>{l.current&&l.current.select()};return o.jsxs("div",{className:`d-flex fs-4 justify-content-start align-items-center flex-column vh-100 ${_.container}`,children:[o.jsx("h1",{className:_.title,children:"Generate a single use password"}),o.jsx(fe,{className:`${_.spinner} ${s?_.visible:""}`,variant:"primary",animation:"border"}),o.jsx(pe,{disabled:s,onClick:w,variant:"primary",size:"lg",className:_.button,children:"Generate"}),a&&o.jsx(P,{variant:"danger",children:a}),t&&o.jsx(P,{variant:"success",className:_.success,children:o.jsxs("div",{className:_["message-items"],children:[o.jsx("textarea",{value:t,onClick:y,ref:l,rows:1,readOnly:!0,className:_["password-text"]}),o.jsx(Fe,{target:d.current,show:i,placement:"top",children:c=>o.jsx(X,{className:_.tooltip,id:"copy-tooltip",...c,children:"Copied!"})}),o.jsx("button",{onClick:h,ref:d,className:_["copy-wrapper"],children:o.jsx("div",{className:_.copy,children:o.jsx(he,{})})})]})})]})};export{Ve as default};
