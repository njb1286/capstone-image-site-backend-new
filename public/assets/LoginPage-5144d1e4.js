import{r as a,j as s,A as n,S as j,w as _,x as y}from"./index-602cb982.js";import{g as k,s as N}from"./token-f48d968b.js";import{C as v}from"./Container-3edba2f1.js";const C="_group_h51hd_1",E="_button_h51hd_6",I="_form_h51hd_10",o={group:C,button:E,form:I,switch:"_switch_h51hd_20"},T=e=>{const[r,c]=a.useState(!1),[b,l]=a.useState(!1),[d,u]=a.useState(""),[m,w]=a.useState(!1),x=async t=>{var g,f;t.preventDefault(),l(!1),c(!0);const i=new FormData;i.append("password",d),i.append("singleUse",m.toString());const h=await(await fetch(`${y}/login`,{method:"POST",headers:{Authorization:k()},body:i})).json();if(c(!1),u(""),"token"in h){N(h.token),(g=e.onSubmit)==null||g.call(e,!0);return}l(!0),(f=e.onSubmit)==null||f.call(e,!1)},p=t=>{u(t.target.value)},S=()=>{w(t=>!t)};return s.jsx(v,{fluid:!0,className:"d-flex align-items-center justify-content-center",style:{height:"100vh"},children:s.jsxs(n,{onSubmit:x,className:o.form,children:[s.jsxs(n.Group,{className:o.group,controlId:"formPassword",children:[s.jsx("h2",{className:"text-center",children:"Password"}),s.jsx(n.Control,{value:d,onChange:p,disabled:r,type:"password",placeholder:"Enter password"}),s.jsx(n.Check,{type:"checkbox",label:"Single-use password",checked:m,onChange:S,className:o.switch,id:"single-use-password-input"}),b&&s.jsx("p",{className:"text-danger fs-3",children:"Incorrect password!"})]}),r&&s.jsx(j,{variant:"primary",animation:"border"}),s.jsx(_,{className:o.button,variant:"primary",type:"submit",disabled:r,children:"Login"})]})})};export{T as default};
