import{r,u as y,j as a,c as S,F as I,I as T,z as $,D as x,S as D,N as b,x as E,y as f,L as G}from"./index-0fc6879d.js";import{u as A}from"./useLazyImage-de59ceca.js";import{a as L,b as k,C as R}from"./CardText-a52d7834.js";import{g as B}from"./token-f48d968b.js";import{u as F}from"./useDispatch-c9430fdf.js";const v=r.forwardRef(({className:e,bsPrefix:t,as:o="span",...s},i)=>(t=y(t,"input-group-text"),a.jsx(o,{ref:i,className:S(e,t),...s})));v.displayName="InputGroupText";const p=v,H=e=>a.jsx(p,{children:a.jsx(I,{type:"checkbox",...e})}),M=e=>a.jsx(p,{children:a.jsx(I,{type:"radio",...e})}),C=r.forwardRef(({bsPrefix:e,size:t,hasValidation:o,className:s,as:i="div",...u},d)=>{e=y(e,"input-group");const l=r.useMemo(()=>({}),[]);return a.jsx(T.Provider,{value:l,children:a.jsx(i,{ref:d,...u,className:S(s,e,t&&`${e}-${t}`,o&&"has-validation")})})});C.displayName="InputGroup";const z=Object.assign(C,{Text:p,Radio:M,Checkbox:H}),_={"search-bar-wrapper":"_search-bar-wrapper_fc2ct_1","search-section":"_search-section_fc2ct_6","search-input":"_search-input_fc2ct_6","spinner-wrapper":"_spinner-wrapper_fc2ct_14"},V=["All",...$],O=["Date","Title","Category"];function U(e){const[t,o]=r.useState(!1),s=r.useRef(void 0),i=l=>{var c;(c=e.onSelectCategory)==null||c.call(e,l)},u=l=>{var c;(c=e.onSelectSort)==null||c.call(e,l)},d=l=>{clearTimeout(s.current),o(!0),s.current=setTimeout(()=>{var c;(c=e.onChange)==null||c.call(e,l.target.value),o(!1)},350)};return a.jsxs("div",{className:_["search-bar-wrapper"],children:[a.jsxs(z,{className:_["search-section"],children:[a.jsx("input",{onChange:d,type:"text",className:`form-control ${_["search-input"]}`,placeholder:"Search..."}),a.jsx(x,{title:"Sort by",onSelect:u,categories:O,defaultValue:"Date"}),a.jsx(x,{title:"Filter",onSelect:i,categories:V,defaultValue:"All"})]}),t&&a.jsx("div",{className:_["spinner-wrapper"],children:a.jsx(D,{animation:"border",variant:"primary"})})]})}const q="_cards_1xtvc_1",J="_visible_1xtvc_21",m={"cards-wrapper":"_cards-wrapper_1xtvc_1",cards:q,"no-images":"_no-images_1xtvc_11","loading-images":"_loading-images_1xtvc_15",visible:J},K="_card_1l3aj_1",Q="_header_1l3aj_15",W="_image_1l3aj_25",X="_loaded_1l3aj_41",Y="_footer_1l3aj_69",Z="_category_1l3aj_73",g={card:K,header:Q,"image-wrapper":"_image-wrapper_1l3aj_25",image:W,loaded:X,"loading-img":"_loading-img_1l3aj_44","loading-image":"_loading-image_1l3aj_1",footer:Y,category:Z};function P(e){const{title:t,id:o}=e,[s,i]=A(o,t,{size:"medium"});return r.useEffect(()=>{i()},[e.stateToListenTo]),a.jsxs(b,{to:`/views?id=${o}`,className:`card text-center ${g.card}`,children:[a.jsx(L,{className:g.header,children:a.jsx("h2",{children:e.title})}),s,a.jsx(k,{className:g.footer,children:a.jsxs(R,{className:g.category,children:["Category: ",e.category]})})]})}const ee=e=>async function(t){const s=await(await fetch(`${E}/get`,{method:"GET",headers:{Authorization:B(),loadedItems:e??""}})).json();t({type:"ADD_IMAGE_ITEMS",payload:s}),t({type:"SET_LOADED_ITEMS",payload:!0})};function j(e){return e.toLowerCase()}const ce=()=>{const e=f(n=>n.imageItems),t=f(n=>n.loadedAllItems),o=F(),s=r.useRef(t),[i,u]=r.useState(""),[d,l]=r.useState("All"),[c,w]=r.useState("Date");r.useEffect(()=>{t||s.current||(s.current=!0,o(ee(e.map(n=>n.id).join(","))))},[]);const N=r.useMemo(()=>e.filter(n=>i&&!n.title.toLowerCase().includes(i.toLowerCase())?!1:d==="All"?!0:n.category===d).sort((n,h)=>n[j(c)].localeCompare(h[j(c)])),[i,d,e,c]);return a.jsxs(a.Fragment,{children:[a.jsx(U,{onChange:u,onSelectCategory:l,onSelectSort:w}),a.jsxs("div",{className:m["cards-wrapper"],children:[a.jsx("div",{className:`${m.cards} ${m.grid}`,children:N.map((n,h)=>r.createElement(P,{...n,stateToListenTo:e,key:`card_${h}`}))}),a.jsx(G,{fullScreen:!1,className:`${m["loading-images"]} ${t?"":m.visible}`})]})]})};export{ce as default};
